<?xml version="1.0"?>
<config>
  <modules>
    <ZetaPrints_WebToPrint>
      <version>2</version>
    </ZetaPrints_WebToPrint>
  </modules>

  <global>
    <models>
      <webtoprint>
        <class>ZetaPrints_WebToPrint_Model</class>
        <resourceModel>webtoprint_mysql4</resourceModel>

        <rewrite>
          <templates-synchronization>ZetaPrints_WebToPrint_Model_Convert_Parser_Template</templates-synchronization>
          <products-creation>ZetaPrints_WebToPrint_Model_Convert_Mapper_Product</products-creation>
        </rewrite>
      </webtoprint>

      <webtoprint_mysql4>
        <class>ZetaPrints_WebToPrint_Model_Mysql4</class>

        <entities>
          <template>
            <table>zetaprints_templates</table>
          </template>
        </entities>
      </webtoprint_mysql4>

      <catalog>
        <rewrite>
          <product>ZetaPrints_WebToPrint_Model_Product</product>
        </rewrite>
      </catalog>
    </models>

    <helpers>
      <catalog>
        <rewrite>
          <image>ZetaPrints_WebToPrint_Helper_Image</image>
        </rewrite>
      </catalog>

      <webtoprint>
        <class>ZetaPrints_WebToPrint_Helper</class>

        <rewrite>
          <personalization-form>ZetaPrints_WebToPrint_Helper_PersonalizationForm</personalization-form>
        </rewrite>
      </webtoprint>
    </helpers>

    <resources>
      <webtoprint_setup>
        <setup>
          <module>ZetaPrints_WebToPrint</module>
          <class>ZetaPrints_WebToPrint_Model_Resource_Mysql4_Setup</class>
        </setup>
        <connection>
          <use>core_setup</use>
        </connection>
      </webtoprint_setup>

      <webtoprint_write>
        <connection>
          <use>core_write</use>
        </connection>
      </webtoprint_write>

      <webtoprint_read>
        <connection>
          <use>core_read</use>
        </connection>
      </webtoprint_read>
    </resources>

    <events>
      <checkout_cart_product_add_after>
        <observers>
          <webtoprint-order-creation-observer>
            <type>singleton</type>
            <class>ZetaPrints_WebToPrint_Model_Events_Observer</class>
            <method>create_zetaprints_order</method>
          </webtoprint-order-creation-observer>
        </observers>
      </checkout_cart_product_add_after>

      <controller_action_predispatch_checkout_cart_add>
        <observers>
          <webtoprint-template-values-observer>
            <type>singleton</type>
            <class>ZetaPrints_WebToPrint_Model_Events_Observer</class>
            <method>store_template_values</method>
          </webtoprint-template-values-observer>
        </observers>
      </controller_action_predispatch_checkout_cart_add>

      <catalog_product_save_before>
        <observers>
          <webtoprint-product-required-options>
            <type>singleton</type>
            <class>ZetaPrints_WebToPrint_Model_Events_Observer</class>
            <method>set_required_options</method>
          </webtoprint-product-required-options>
        </observers>
      </catalog_product_save_before>

      <catalog_controller_product_view>
        <observers>
          <webtoprint-specify-option-message>
            <type>singleton</type>
            <class>ZetaPrints_WebToPrint_Model_Events_Observer</class>
            <method>specify_option_message</method>
          </webtoprint-specify-option-message>
        </observers>
      </catalog_controller_product_view>
    </events>
  </global>

  <frontend>
    <routers>
      <ZetaPrints_WebToPrint>
        <use>standard</use>
        <args>
          <module>ZetaPrints_WebToPrint</module>
          <frontName>web-to-print</frontName>
        </args>
      </ZetaPrints_WebToPrint>
    </routers>
  </frontend>

  <stores>
    <admin>
      <design>
        <package>
          <name>default</name>
        </package>
        <theme>
          <default>zptheme</default>
        </theme>
      </design>
    </admin>
  </stores>

</config>
